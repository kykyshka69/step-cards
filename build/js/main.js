class Tools{constructor(e){this.elem=e}createElement(){return document.createElement(""+this.elem)}}class Buttons extends Tools{constructor({id:e,elem:t,className:n,type:s,textContent:o}){super(t),this.id=e,this.className=n,this.type=s,this.textContent=o}render(){return this.btn=this.createElement(),this.btn.className=this.className,this.btn.type=this.type,this.btn.textContent=this.textContent,this.btn.id=this.id,this.btn}}class Modal extends Tools{constructor({elem:e,className:t}){super(e),this.className=t}render(){return this.div=this.createElement(),this.div.className=this.className,this.div.insertAdjacentHTML("afterbegin","<div class=popup><span class=popup__close>крестик</span></div>"),this.div}}class Form extends Tools{constructor({elem:e,action:t,name:n,className:s}){super(e),this.name=n,this.className=s,this.action=t}render(){return this.form=this.createElement(),this.form.name=this.name,this.form.className=this.className,this.form.action=this.action,this.form}}class Label extends Tools{constructor({elem:e,name:t,className:n}){super(e),this.className=n,this.name=t}render(){return this.label=this.createElement(),this.label.name=this.name,this.label.className=this.className,this.label}}class Input extends Tools{constructor({elem:e,name:t,className:n,type:s,placeholder:o}){super(e),this.name=t,this.className=n,this.type=s,this.placeholder=o}render(){return this.input=this.createElement(),this.input.required=!0,this.input.name=this.name,this.input.className=this.className,this.input.type=this.type,this.input.placeholder=this.placeholder,this.input}}const btnLogin=new Buttons({id:"login-btn",elem:"button",className:"header-button",type:"button",textContent:"LOGIN"}),btnCreate=new Buttons({id:"create-btn",elem:"button",className:"header-button",type:"button",textContent:"CreateVisit"}),modalWindow=new Modal({elem:"div",className:"background-popup"}),formAuthorization=new Form({action:"#",name:"authorization",className:"popup-form",elem:"form"}),labelLogin=new Label({elem:"label",name:"login-authorization",className:"login-authorization"}),labelPassword=new Label({elem:"label",name:"login-authorization",className:"password-authorization"}),inputLogin=new Input({name:"login",className:"input-login",type:"email",placeholder:"Your email",elem:"input"}),inputPassword=new Input({name:"password",className:"input-password",type:"password",placeholder:"Your password",elem:"input"}),btnSubmit=new Buttons({elem:"button",className:"btn-submit",type:"submit",textContent:"submit"}),btnClose=new Buttons({elem:"button",className:"btn-close",type:"button",textContent:"close"});let header=document.querySelector(".header");header.append(btnLogin.render());let container=document.querySelector(".container");container.append(modalWindow.render());let loginButton=document.querySelector("#login-btn"),popup=document.querySelector(".background-popup");loginButton.addEventListener("click",()=>{popup.classList.add("popup__active"),loginButton.style.display="none"});let popupClass=document.querySelector(".popup");popupClass.append(formAuthorization.render());const formLogin=document.querySelector(".popup-form");formLogin.append(labelLogin.render()),formLogin.append(labelPassword.render()),formLogin.append(btnSubmit.render(),btnClose.render());const labelLog=document.querySelector(".login-authorization");labelLog.prepend(inputLogin.render());const labelPass=document.querySelector(".password-authorization");labelPass.prepend(inputPassword.render());let closeButton=document.querySelector(".btn-close");closeButton.addEventListener("click",()=>{popup.classList.remove("popup__active"),loginButton.style.display="block"});const inputLog=document.querySelector(".input-login"),inputPass=document.querySelector(".input-password"),submitBtn=document.querySelector(".btn-submit");submitBtn.onclick=()=>{fetch("https://ajax.test-danit.com/api/v2/cards/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:inputLog.value,password:inputPass.value})}).then(e=>200!==e.status?(alert("Incorrect Login or Password"),"noid"):(header.append(btnCreate.render()),loginButton.style.display="none",popup.classList.remove("popup__active"),e.text())).then(e=>{localStorage.setItem("token",e)}),console.log(inputLog.value),console.log(inputPass.value)};